import asyncio
import ebest
from common import *
from app_keys import appkey, appsecretkey # app_keys.py 파일에 appkey, appsecretkey 변수를 정의하고 사용하세요

async def main():
    api=ebest.OpenApi()
    if not await api.login(appkey, appsecretkey): return print(f'연결실패: {api.last_message}')
    
    # [요청] o3101 : 해외선물마스터조회-API용
    request = {
        "o3101InBlock": {
            "gubun": "0",
        },
    }
    response = await api.request("o3101", request)
    if not response: return print(f"요청실패: {api.last_message}")
    
    print_table(response.body['o3101OutBlock'])
    
    ... # 다른 작업 수행
    await api.close()

asyncio.run(main())


# Output:
'''
Row Count = 41
+---------+---------------------------------------+----------+----------+------------------------------+--------+------------+---------+--------+-------------+--------------+--------------+-----------+-------+---------+--------+-----------------+----------+---------+----------+----------+----------+----------+----------+-----------+-------+
|  Symbol |                SymbolNm               | ApplDate | BscGdsCd |           BscGdsNm           | ExchCd |   ExchNm   | CrncyCd | NotaCd |    UntPrc   |   MnChgAmt   |   RgltFctr   | CtrtPrAmt | GdsCd | LstngYr | LstngM |      EcPrc      | DlStrtTm | DlEndTm | DlPsblCd | MgnCltCd | OpngMgn  | MntncMgn | OpngMgnR | MntncMgnR | DotGb |
+---------+---------------------------------------+----------+----------+------------------------------+--------+------------+---------+--------+-------------+--------------+--------------+-----------+-------+---------+--------+-----------------+----------+---------+----------+----------+----------+----------+----------+-----------+-------+
|  CUSH24 |       Renminbi_USD/CNH(2024.03)       | 20240307 |   CUS    |       Renminbi_USD/CNH       |  HKEX  | 홍콩거래소 |   CNY   |   10   | 0.000100000 | 10.000000000 | 1.0000000000 | 100000.00 |  002  |   2024  |   H    |   7.209500000   |  201500  |  193000 |    1     |    1     | 14337.00 | 14337.00 |  0.000   |   0.000   |   4   |
|  CUSJ24 |       Renminbi_USD/CNH(2024.04)       | 20240307 |   CUS    |       Renminbi_USD/CNH       |  HKEX  | 홍콩거래소 |   CNY   |   10   | 0.000100000 | 10.000000000 | 1.0000000000 | 100000.00 |  002  |   2024  |   J    |   7.195400000   |  201500  |  193000 |    1     |    1     | 14337.00 | 14337.00 |  0.000   |   0.000   |   4   |
|  CUSK24 |       Renminbi_USD/CNH(2024.05)       | 20240307 |   CUS    |       Renminbi_USD/CNH       |  HKEX  | 홍콩거래소 |   CNY   |   10   | 0.000100000 | 10.000000000 | 1.0000000000 | 100000.00 |  002  |   2024  |   K    |   7.182100000   |  201500  |  193000 |    1     |    1     | 14337.00 | 14337.00 |  0.000   |   0.000   |   4   |
|  CUSM24 |       Renminbi_USD/CNH(2024.06)       | 20240307 |   CUS    |       Renminbi_USD/CNH       |  HKEX  | 홍콩거래소 |   CNY   |   10   | 0.000100000 | 10.000000000 | 1.0000000000 | 100000.00 |  002  |   2024  |   M    |   7.164700000   |  201500  |  193000 |    1     |    1     | 14337.00 | 14337.00 |  0.000   |   0.000   |   4   |
|  CUSU24 |       Renminbi_USD/CNH(2024.09)       | 20240307 |   CUS    |       Renminbi_USD/CNH       |  HKEX  | 홍콩거래소 |   CNY   |   10   | 0.000100000 | 10.000000000 | 1.0000000000 | 100000.00 |  002  |   2024  |   U    |   7.118500000   |  201500  |  193000 |    1     |    1     | 14337.00 | 14337.00 |  0.000   |   0.000   |   4   |
|  CUSZ24 |       Renminbi_USD/CNH(2024.12)       | 20240307 |   CUS    |       Renminbi_USD/CNH       |  HKEX  | 홍콩거래소 |   CNY   |   10   | 0.000100000 | 10.000000000 | 1.0000000000 | 100000.00 |  002  |   2024  |   Z    |   7.073400000   |  201500  |  193000 |    1     |    1     | 14337.00 | 14337.00 |  0.000   |   0.000   |   4   |
| HCEIH24 |            H-Share(2024.03)           | 20240307 |   HCEI   |           H-Share            |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   H    |  5690.000000000 |  181500  |  173000 |    1     |    1     | 31255.00 | 31255.00 |  0.000   |   0.000   |   0   |
| HCEIJ24 |            H-Share(2024.04)           | 20240307 |   HCEI   |           H-Share            |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   J    |  5708.000000000 |  181500  |  173000 |    1     |    1     | 31255.00 | 31255.00 |  0.000   |   0.000   |   0   |
| HCEIK24 |            H-Share(2024.05)           | 20240307 |   HCEI   |           H-Share            |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   K    |  5718.000000000 |  181500  |  173000 |    1     |    1     | 31255.00 | 31255.00 |  0.000   |   0.000   |   0   |
| HCEIM24 |            H-Share(2024.06)           | 20240307 |   HCEI   |           H-Share            |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   M    |  5690.000000000 |  181500  |  173000 |    1     |    1     | 31255.00 | 31255.00 |  0.000   |   0.000   |   0   |
| HCEIU24 |            H-Share(2024.09)           | 20240307 |   HCEI   |           H-Share            |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   U    |  5620.000000000 |  181500  |  173000 |    1     |    1     | 31255.00 | 31255.00 |  0.000   |   0.000   |   0   |
| HCEIZ24 |            H-Share(2024.12)           | 20240307 |   HCEI   |           H-Share            |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   Z    |  5702.000000000 |  181500  |  173000 |    1     |    1     | 31255.00 | 31255.00 |  0.000   |   0.000   |   0   |
| HCHHH24 |         CES China 120(2024.03)        | 20240307 |   HCHH   |        CES China 120         |  HKEX  | 홍콩거래소 |   HKD   |   10   | 0.500000000 | 25.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   H    |  4916.500000000 |  101500  |  173000 |    1     |    1     | 16478.00 | 16478.00 |  0.000   |   0.000   |   1   |
| HCHHJ24 |         CES China 120(2024.04)        | 20240307 |   HCHH   |        CES China 120         |  HKEX  | 홍콩거래소 |   HKD   |   10   | 0.500000000 | 25.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   J    |  4916.500000000 |  101500  |  173000 |    1     |    1     | 16478.00 | 16478.00 |  0.000   |   0.000   |   1   |
| HCHHM24 |         CES China 120(2024.06)        | 20240307 |   HCHH   |        CES China 120         |  HKEX  | 홍콩거래소 |   HKD   |   10   | 0.500000000 | 25.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   M    |  4917.500000000 |  101500  |  173000 |    1     |    1     | 16478.00 | 16478.00 |  0.000   |   0.000   |   1   |
| HCHHU24 |         CES China 120(2024.09)        | 20240307 |   HCHH   |        CES China 120         |  HKEX  | 홍콩거래소 |   HKD   |   10   | 0.500000000 | 25.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   U    |  4917.500000000 |  101500  |  173000 |    1     |    1     | 16478.00 | 16478.00 |  0.000   |   0.000   |   1   |
| HMCEH24 |         Mini H-Shares(2024.03)        | 20240307 |   HMCE   |        Mini H-Shares         |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 10.000000000 | 1.0000000000 |   10.00   |  001  |   2024  |   H    |  5690.000000000 |  181500  |  173000 |    1     |    1     | 6251.00  | 6251.00  |  0.000   |   0.000   |   0   |
| HMCEJ24 |         Mini H-Shares(2024.04)        | 20240307 |   HMCE   |        Mini H-Shares         |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 10.000000000 | 1.0000000000 |   10.00   |  001  |   2024  |   J    |  5708.000000000 |  181500  |  173000 |    1     |    1     | 6251.00  | 6251.00  |  0.000   |   0.000   |   0   |
| HMCEM24 |         Mini H-Shares(2024.06)        | 20240307 |   HMCE   |        Mini H-Shares         |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 10.000000000 | 1.0000000000 |   10.00   |  001  |   2024  |   M    |  5690.000000000 |  181500  |  173000 |    1     |    1     | 6251.00  | 6251.00  |  0.000   |   0.000   |   0   |
| HMCEU24 |         Mini H-Shares(2024.09)        | 20240307 |   HMCE   |        Mini H-Shares         |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 10.000000000 | 1.0000000000 |   10.00   |  001  |   2024  |   U    |  5620.000000000 |  181500  |  173000 |    1     |    1     | 6251.00  | 6251.00  |  0.000   |   0.000   |   0   |
|  HMHH24 |        Mini Hang Seng(2024.03)        | 20240307 |   HMH    |        Mini Hang Seng        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 10.000000000 | 1.0000000000 |   10.00   |  001  |   2024  |   H    | 16436.000000000 |  181500  |  173000 |    1     |    1     | 14949.00 | 14949.00 |  0.000   |   0.000   |   0   |
|  HMHJ24 |        Mini Hang Seng(2024.04)        | 20240307 |   HMH    |        Mini Hang Seng        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 10.000000000 | 1.0000000000 |   10.00   |  001  |   2024  |   J    | 16494.000000000 |  181500  |  173000 |    1     |    1     | 14949.00 | 14949.00 |  0.000   |   0.000   |   0   |
|  HMHM24 |        Mini Hang Seng(2024.06)        | 20240307 |   HMH    |        Mini Hang Seng        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 10.000000000 | 1.0000000000 |   10.00   |  001  |   2024  |   M    | 16386.000000000 |  181500  |  173000 |    1     |    1     | 14949.00 | 14949.00 |  0.000   |   0.000   |   0   |
|  HMHU24 |        Mini Hang Seng(2024.09)        | 20240307 |   HMH    |        Mini Hang Seng        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 10.000000000 | 1.0000000000 |   10.00   |  001  |   2024  |   U    | 16251.000000000 |  181500  |  173000 |    1     |    1     | 14949.00 | 14949.00 |  0.000   |   0.000   |   0   |
|  HSIH24 |           Hang Seng(2024.03)          | 20240307 |   HSI    |          Hang Seng           |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   H    | 16436.000000000 |  181500  |  173000 |    1     |    1     | 74746.00 | 74746.00 |  0.000   |   0.000   |   0   |
|  HSIJ24 |           Hang Seng(2024.04)          | 20240307 |   HSI    |          Hang Seng           |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   J    | 16494.000000000 |  181500  |  173000 |    1     |    1     | 74746.00 | 74746.00 |  0.000   |   0.000   |   0   |
|  HSIK24 |           Hang Seng(2024.05)          | 20240307 |   HSI    |          Hang Seng           |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   K    | 16470.000000000 |  181500  |  173000 |    1     |    1     | 74746.00 | 74746.00 |  0.000   |   0.000   |   0   |
|  HSIM24 |           Hang Seng(2024.06)          | 20240307 |   HSI    |          Hang Seng           |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   M    | 16386.000000000 |  181500  |  173000 |    1     |    1     | 74746.00 | 74746.00 |  0.000   |   0.000   |   0   |
|  HSIU24 |           Hang Seng(2024.09)          | 20240307 |   HSI    |          Hang Seng           |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   U    | 16251.000000000 |  181500  |  173000 |    1     |    1     | 74746.00 | 74746.00 |  0.000   |   0.000   |   0   |
|  HSIZ24 |           Hang Seng(2024.12)          | 20240307 |   HSI    |          Hang Seng           |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   Z    | 16414.000000000 |  181500  |  173000 |    1     |    1     | 74746.00 | 74746.00 |  0.000   |   0.000   |   0   |
|  HTIH24 |        Hang Seng TECH(2024.03)        | 20240307 |   HTI    |        Hang Seng TECH        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   H    |  3419.000000000 |  181500  |  173000 |    1     |    1     | 17981.00 | 17981.00 |  0.000   |   0.000   |   0   |
|  HTIJ24 |        Hang Seng TECH(2024.04)        | 20240307 |   HTI    |        Hang Seng TECH        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   J    |  3423.000000000 |  181500  |  173000 |    1     |    1     | 17981.00 | 17981.00 |  0.000   |   0.000   |   0   |
|  HTIK24 |        Hang Seng TECH(2024.05)        | 20240307 |   HTI    |        Hang Seng TECH        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   K    |  3440.000000000 |  181500  |  173000 |    1     |    1     | 17981.00 | 17981.00 |  0.000   |   0.000   |   0   |
|  HTIM24 |        Hang Seng TECH(2024.06)        | 20240307 |   HTI    |        Hang Seng TECH        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   M    |  3447.000000000 |  181500  |  173000 |    1     |    1     | 17981.00 | 17981.00 |  0.000   |   0.000   |   0   |
|  HTIU24 |        Hang Seng TECH(2024.09)        | 20240307 |   HTI    |        Hang Seng TECH        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   U    |  3481.000000000 |  181500  |  173000 |    1     |    1     | 17981.00 | 17981.00 |  0.000   |   0.000   |   0   |
|  HTIZ24 |        Hang Seng TECH(2024.12)        | 20240307 |   HTI    |        Hang Seng TECH        |  HKEX  | 홍콩거래소 |   HKD   |   10   | 1.000000000 | 50.000000000 | 1.0000000000 |   50.00   |  001  |   2024  |   Z    |  3526.000000000 |  181500  |  173000 |    1     |    1     | 17981.00 | 17981.00 |  0.000   |   0.000   |   0   |
|  MCAH24 | MSCI China A50 Connect Index(2024.03) | 20240307 |   MCA    | MSCI China A50 Connect Index |  HKEX  | 홍콩거래소 |   USD   |   10   | 0.200000000 | 5.000000000  | 1.0000000000 |   25.00   |  001  |   2024  |   H    |  1878.800000000 |  181500  |  173000 |    1     |    1     | 3404.00  | 3404.00  |  0.000   |   0.000   |   2   |
|  MCAJ24 | MSCI China A50 Connect Index(2024.04) | 20240307 |   MCA    | MSCI China A50 Connect Index |  HKEX  | 홍콩거래소 |   USD   |   10   | 0.200000000 | 5.000000000  | 1.0000000000 |   25.00   |  001  |   2024  |   J    |  1877.600000000 |  181500  |  173000 |    1     |    1     | 3404.00  | 3404.00  |  0.000   |   0.000   |   2   |
|  MCAM24 | MSCI China A50 Connect Index(2024.06) | 20240307 |   MCA    | MSCI China A50 Connect Index |  HKEX  | 홍콩거래소 |   USD   |   10   | 0.200000000 | 5.000000000  | 1.0000000000 |   25.00   |  001  |   2024  |   M    |  1869.000000000 |  181500  |  173000 |    1     |    1     | 3404.00  | 3404.00  |  0.000   |   0.000   |   2   |
|  MCAU24 | MSCI China A50 Connect Index(2024.09) | 20240307 |   MCA    | MSCI China A50 Connect Index |  HKEX  | 홍콩거래소 |   USD   |   10   | 0.200000000 | 5.000000000  | 1.0000000000 |   25.00   |  001  |   2024  |   U    |  1848.600000000 |  181500  |  173000 |    1     |    1     | 3404.00  | 3404.00  |  0.000   |   0.000   |   2   |
|  MCAZ24 | MSCI China A50 Connect Index(2024.12) | 20240307 |   MCA    | MSCI China A50 Connect Index |  HKEX  | 홍콩거래소 |   USD   |   10   | 0.200000000 | 5.000000000  | 1.0000000000 |   25.00   |  001  |   2024  |   Z    |  1853.200000000 |  181500  |  173000 |    1     |    1     | 3404.00  | 3404.00  |  0.000   |   0.000   |   2   |
+---------+---------------------------------------+----------+----------+------------------------------+--------+------------+---------+--------+-------------+--------------+--------------+-----------+-------+---------+--------+-----------------+----------+---------+----------+----------+----------+----------+----------+-----------+-------+
'''